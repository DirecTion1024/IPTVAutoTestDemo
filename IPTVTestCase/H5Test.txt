*** Settings ***
Resource          ../Resources/Environment.txt
Library           NewLibrary

*** Test Cases ***
IPTVLiveH5Test
    ${Process}    Set Variable    com.fiberhome.iptv
    ${androidProcess}=    Create Dictionary    androidProcess=${Process}
    ${UNICODEKEYBOARD}    Set Variable    True
    ${RESETKEYBOARD}    Set Variable    True
    rc_right
    Open Application    ${SERVERURL}    platformName=${PLATFORMNAME}    platformVersion=${PLATFORMVERSION}    deviceName=${DEVICENAME}    automationName=${AUTOMATIONNAME}    appPackage=${APPPACKAGE}
    ...    appActivity=${APPACTIVITY}    noSign=${NOSIGN}    udid=${UDID}    unicodeKeyboard=True    resetKeyboard=True    chromeOptions=${androidProcess}
    sleep    5
    open_live
    sleep    5
    Capture Page Screenshot
    ${contexts}    get_contexts
    ${current_context}    get_current_context
    Switch To Context    WEBVIEW_com.fiberhome.iptv
    Log Source
    ${current_context}    get_current_context
    rc_left
    : FOR    ${i}    IN RANGE    1    7
    \    rc_down
    Log Source
    特殊频道
    Switch To Context    NATIVE_APP
    ${current_context}    get_current_context
    频道列表截图
    send_email    xiangfang@iflytek.com    liveshot

fiberhome
    ${Process}    Set Variable    com.fiberhome.iptv
    ${androidProcess}=    Create Dictionary    androidProcess=${Process}
    ${UNICODEKEYBOARD}    Set Variable    True
    ${RESETKEYBOARD}    Set Variable    True
    rc_right
    open_youku
    sleep    3
    rc_backkey
    AppiumLibrary.Open Application    ${SERVERURL}    platformName=${PLATFORMNAME}    platformVersion=${PLATFORMVERSION}    deviceName=${DEVICENAME}    automationName=${AUTOMATIONNAME}    appPackage=${APPPACKAGE}
    ...    appActivity=${APPACTIVITY}    noSign=${NOSIGN}    udid=${UDID}    unicodeKeyboard=True    resetKeyboard=True    chromeOptions=${androidProcess}
    sleep    2
    rc_ok
    sleep    2
    ${contexts}    get_contexts
    ${current_context}    get_current_context
    Switch To Context    WEBVIEW_com.fiberhome.iptv
    Log Source
    ${log}    Set Variable    Log Source

test
    ${Process}    Set Variable    com.fiberhome.iptv
    ${androidProcess}=    Create Dictionary    androidProcess=${Process}
    ${UNICODEKEYBOARD}    Set Variable    True
    ${RESETKEYBOARD}    Set Variable    True
    Open Application    ${SERVERURL}    platformName=${PLATFORMNAME}    platformVersion=${PLATFORMVERSION}    deviceName=${DEVICENAME}    automationName=${AUTOMATIONNAME}    appPackage=${APPPACKAGE}
    ...    appActivity=${APPACTIVITY}    noSign=${NOSIGN}    udid=${UDID}    unicodeKeyboard=True    resetKeyboard=True    chromeOptions=${androidProcess}
    rc_right
    open_youku
    sleep    3
    rc_ok
    sleep    2
    ${contexts}    get_contexts
    ${current_context}    get_current_context
    Switch To Context    WEBVIEW_com.fiberhome.iptv
    Switch Window
    Log Source

test123
    ${filenumber}    file_number    f:\file
    log    ${filenumber}
    ${looptimes}    Evaluate    int(${filenumber})+1
    :FOR    ${i}    IN RANGE    1    ${looptimes}
    \    ${filename}    Set Variable    screenshot${i}.png
    \    ${size}    read_size    f:\\file\\${filename}
    \    Run Keyword If    ${size}<50000    move_file    F:\\file\\${filename}    F:\\filetest

*** Keywords ***
特殊频道
    Page Should Contain Text    CCTV-3
    Page Should Contain Text    CCTV-5
    Page Should Contain Text    CCTV-6
    Page Should Contain Text    CCTV-8

频道列表截图
    sx_screen_shot    liveshot
